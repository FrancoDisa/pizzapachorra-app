import{u as se,a as te,e as re,b as ne,c as ae,d as ie,r as a,j as e}from"./index-IPWKeb15.js";import{P as oe}from"./PizzaCustomizationModal-C4AobAN6.js";const le=[{id:1,nombre:"Juan Carlos Pérez",telefono:"099123456",direccion:"Av. 18 de Julio 1234, Montevideo"},{id:2,nombre:"María Fernández",telefono:"099234567",direccion:"Bulevar Artigas 567, Montevideo"},{id:3,nombre:"Carlos Rodríguez",telefono:"099345678",direccion:"Mercedes 890, Montevideo"},{id:4,nombre:"Ana Martínez",telefono:"099456789",direccion:"Constituyente 1234, Montevideo"},{id:5,nombre:"Pedro González",telefono:"099567890",direccion:"Propios 567, Montevideo"},{id:6,nombre:"Sofía López",telefono:"099678901",direccion:"Colonia 890, Montevideo"},{id:7,nombre:"Miguel Torres",telefono:"099789012",direccion:"Pocitos 1234, Montevideo"},{id:8,nombre:"Valentina Silva",telefono:"099890123",direccion:"Cordón 567, Montevideo"}];function ue(){const y=se(),O=te();re(),ne();const h=ae(),{addCustomizedItemToOrder:M,updateCustomizedItemInOrder:T,removeItemFromOrder:de,clearCurrentOrder:ce,setOrderCustomer:A}=ie(),[r,m]=a.useState(1),[u,b]=a.useState(""),[i,w]=a.useState([]),[l,P]=a.useState([]),[c,g]=a.useState(""),[d,f]=a.useState(null),[x,p]=a.useState(!1),[B,j]=a.useState(!1),[_,v]=a.useState(null),[E,C]=a.useState(null),[R,S]=a.useState(!1),[W,N]=a.useState(!1),k=a.useRef(null),F=a.useRef(null),z=[{id:1,title:"Seleccionar Pizzas",description:"Elige las pizzas para el pedido",icon:"🍕"},{id:2,title:"Configurar Extras",description:"Añade extras y personaliza",icon:"➕"},{id:3,title:"Cliente y Confirmación",description:"Datos del cliente y finalizar",icon:"✅"}];a.useEffect(()=>{switch(r){case 1:p(i.length>0);break;case 2:p(!0);break;case 3:p(!!d);break;default:p(!1)}},[r,i,d]),a.useEffect(()=>{const s=t=>{var n,o;if(!(t.target instanceof HTMLInputElement))switch(t.key.toLowerCase()){case"f":t.preventDefault(),r===1||r===2?(n=k.current)==null||n.focus():r===3&&((o=F.current)==null||o.focus());break;case"enter":t.preventDefault(),x&&L();break;case"backspace":t.preventDefault(),r>1&&D();break;case"escape":t.preventDefault(),b(""),g("");break;case"1":t.preventDefault(),m(1);break;case"2":t.preventDefault(),i.length>0&&m(2);break;case"3":t.preventDefault(),i.length>0&&m(3);break}};return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[x,r,i.length]);const L=a.useCallback(()=>{r<3&&x?(r===2&&(i.forEach(s=>{const t={id:Date.now()+Math.random(),pizza_id:s.id,pizza_nombre:s.nombre,precio_base:Math.round(parseFloat(s.precio_base.toString())),cantidad:1,mitad_y_mitad:!1,extras:[],ingredientes_removidos:[],notas:"",precio_total:Math.round(parseFloat(s.precio_base.toString()))};M(t)}),l.forEach(s=>{console.log("Agregando extra:",s)})),m(r+1),b("")):r===3&&x&&V()},[r,x,i,l,addItemToOrder]),D=()=>{r>1&&(m(r-1),b(""))},V=()=>{d&&(A(d),m(1),w([]),P([]),f(null),g(""))},J=s=>{v(s),j(!0)},G=s=>{E?(T(s),C(null)):(M(s),w(t=>{if(!t.find(o=>o.id===s.pizza_id)&&s.pizza_id){const o=y.find(ee=>ee.id===s.pizza_id);if(o)return[...t,o]}return t})),j(!1),v(null)},H=s=>{w(t=>t.filter(n=>n.id!==s.id))},$=s=>{P(t=>t.find(o=>o.id===s.id)?t.filter(o=>o.id!==s.id):[...t,s])},K=s=>{f(s),g(""),N(!1)},q=()=>{S(!0),N(!1)},Q=s=>{const t={id:Date.now(),nombre:s.nombre,telefono:s.telefono,direccion:s.direccion,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};f(t),S(!1),g("")},U=s=>s.trim()?le.filter(t=>{var n;return((n=t.nombre)==null?void 0:n.toLowerCase().includes(s.toLowerCase()))||t.telefono.includes(s)}):[],X=y.filter(s=>s.nombre.toLowerCase().includes(u.toLowerCase())||s.descripcion.toLowerCase().includes(u.toLowerCase())),Y=O.filter(s=>s.nombre.toLowerCase().includes(u.toLowerCase())||s.categoria.toLowerCase().includes(u.toLowerCase())),Z=U(c).slice(0,5),I=/^[0-9+\-\s]+$/.test(c.trim());return e.jsxs("div",{className:"min-h-screen bg-gray-900 p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Wizard de Pedidos - 3 Pasos"}),e.jsxs("div",{className:"text-sm text-gray-400 mb-6",children:["Navegación: ",e.jsx("kbd",{className:"bg-gray-700 px-1 rounded",children:"Enter"}),"=Siguiente •",e.jsx("kbd",{className:"bg-gray-700 px-1 rounded mx-1",children:"Backspace"}),"=Anterior •",e.jsx("kbd",{className:"bg-gray-700 px-1 rounded",children:"F"}),"=Buscar •",e.jsx("kbd",{className:"bg-gray-700 px-1 rounded mx-1",children:"1-3"}),"=Ir a paso"]}),e.jsx("div",{className:"flex items-center justify-between mb-6",children:z.map((s,t)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-12 h-12 rounded-full border-2 transition-all ${r===s.id?"bg-blue-600 border-blue-600 text-white":r>s.id?"bg-green-600 border-green-600 text-white":"border-gray-600 text-gray-400"}`,children:r>s.id?"✓":s.icon}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:`font-medium ${r===s.id?"text-blue-400":r>s.id?"text-green-400":"text-gray-400"}`,children:s.title}),e.jsx("div",{className:"text-sm text-gray-500",children:s.description})]}),t<z.length-1&&e.jsx("div",{className:`flex-1 h-0.5 mx-8 ${r>s.id?"bg-green-600":"bg-gray-600"}`})]},s.id))})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[r===1&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-4",children:["Paso 1: Seleccionar Pizzas (",i.length," seleccionadas)"]}),e.jsxs("div",{className:"mb-6 relative",children:[e.jsx("input",{ref:k,type:"text",placeholder:"Buscar pizzas... (F para focus)",value:u,onChange:s=>b(s.target.value),className:"w-full px-4 py-3 pl-10 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("svg",{className:"absolute left-3 top-3.5 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),i.length>0&&e.jsxs("div",{className:"mb-6 p-4 bg-green-900/30 border border-green-600/30 rounded-lg",children:[e.jsx("h3",{className:"text-green-400 font-medium mb-2",children:"Pizzas Seleccionadas:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(s=>e.jsxs("span",{className:"px-3 py-1 bg-green-600 text-white rounded-full text-sm cursor-pointer hover:bg-green-700 transition-colors",onClick:()=>H(s),children:[s.nombre," ($",Math.round(parseFloat(s.precio_base.toString())),") ✕"]},s.id))})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:X.map(s=>e.jsxs("div",{onClick:()=>J(s),className:`p-4 rounded-lg border-2 cursor-pointer transition-all ${i.find(t=>t.id===s.id)?"border-green-500 bg-green-900/30":"border-gray-600 bg-gray-700 hover:border-blue-500 hover:bg-gray-600"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"font-medium text-white",children:s.nombre}),e.jsxs("span",{className:"text-green-400 font-bold",children:["$",Math.round(parseFloat(s.precio_base.toString()))]})]}),e.jsx("p",{className:"text-gray-400 text-sm mb-3 line-clamp-2",children:s.descripcion}),s.ingredientes.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.ingredientes.slice(0,3).map((t,n)=>e.jsx("span",{className:"px-2 py-1 bg-gray-600 rounded text-xs text-gray-300",children:t},n)),s.ingredientes.length>3&&e.jsxs("span",{className:"px-2 py-1 bg-gray-600 rounded text-xs text-gray-300",children:["+",s.ingredientes.length-3]})]})]},s.id))})]}),r===2&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-4",children:["Paso 2: Configurar Extras (",l.length," seleccionados)"]}),e.jsxs("div",{className:"mb-6 p-4 bg-blue-900/30 border border-blue-600/30 rounded-lg",children:[e.jsx("h3",{className:"text-blue-400 font-medium mb-2",children:"Pizzas Seleccionadas:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(s=>e.jsxs("span",{className:"px-3 py-1 bg-blue-600 text-white rounded-full text-sm",children:[s.nombre," ($",Math.round(parseFloat(s.precio_base.toString())),")"]},s.id))})]}),e.jsxs("div",{className:"mb-6 relative",children:[e.jsx("input",{ref:k,type:"text",placeholder:"Buscar extras... (F para focus, opcional)",value:u,onChange:s=>b(s.target.value),className:"w-full px-4 py-3 pl-10 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("svg",{className:"absolute left-3 top-3.5 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),l.length>0&&e.jsxs("div",{className:"mb-6 p-4 bg-orange-900/30 border border-orange-600/30 rounded-lg",children:[e.jsx("h3",{className:"text-orange-400 font-medium mb-2",children:"Extras Seleccionados:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(s=>e.jsxs("span",{className:"px-3 py-1 bg-orange-600 text-white rounded-full text-sm cursor-pointer hover:bg-orange-700 transition-colors",onClick:()=>$(s),children:[s.nombre," (+$",Math.round(parseFloat(s.precio.toString())),") ✕"]},s.id))})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Y.map(s=>e.jsxs("div",{onClick:()=>$(s),className:`p-4 rounded-lg border-2 cursor-pointer transition-all ${l.find(t=>t.id===s.id)?"border-orange-500 bg-orange-900/30":"border-gray-600 bg-gray-700 hover:border-blue-500 hover:bg-gray-600"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"font-medium text-white",children:s.nombre}),e.jsxs("span",{className:"text-green-400 font-bold",children:["+$",Math.round(parseFloat(s.precio.toString()))]})]}),e.jsx("p",{className:"text-gray-400 text-sm",children:s.categoria})]},s.id))})]}),r===3&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Paso 3: Cliente y Confirmación"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"Información del Cliente"}),d?e.jsx("div",{className:"p-4 bg-green-900/30 border border-green-600/30 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-green-400 font-medium",children:d.nombre}),e.jsx("div",{className:"text-green-300 text-sm",children:d.telefono}),d.direccion&&e.jsx("div",{className:"text-gray-400 text-xs mt-1",children:d.direccion})]}),e.jsx("button",{onClick:()=>{f(null),g("")},className:"text-xs text-gray-400 hover:text-white bg-gray-700 px-2 py-1 rounded",children:"Cambiar"})]})}):e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:F,type:"text",placeholder:"Buscar cliente por teléfono o nombre...",value:c,onChange:s=>{g(s.target.value),N(s.target.value.length>0)},onFocus:()=>N(c.length>0),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),W&&c&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-gray-800 border border-gray-600 rounded-lg shadow-lg z-10 max-h-60 overflow-y-auto",children:[Z.map(s=>e.jsxs("button",{onClick:()=>K(s),className:"w-full text-left px-4 py-3 hover:bg-gray-700 border-b border-gray-700 last:border-b-0 transition-colors",children:[e.jsx("div",{className:"text-white font-medium",children:s.nombre}),e.jsx("div",{className:"text-gray-400 text-sm",children:s.telefono}),s.direccion&&e.jsx("div",{className:"text-gray-500 text-xs",children:s.direccion})]},s.id)),e.jsxs("button",{onClick:q,className:"w-full text-left px-4 py-3 bg-blue-700 hover:bg-blue-600 text-blue-200 transition-colors",children:[e.jsx("div",{className:"font-medium",children:"+ Crear nuevo cliente"}),e.jsx("div",{className:"text-sm text-blue-300",children:c})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"Resumen del Pedido"}),e.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 space-y-3",children:[h.length>0?e.jsxs("div",{children:[e.jsxs("h4",{className:"text-green-400 font-medium mb-2",children:["Items del Pedido (",h.length,")"]}),e.jsx("div",{className:"space-y-2",children:h.map(s=>e.jsx("div",{className:"bg-gray-600 rounded p-3",children:e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-white font-medium",children:s.pizza_nombre}),e.jsxs("span",{className:"text-gray-400 text-sm",children:["x",s.cantidad]}),e.jsx("button",{onClick:()=>{const t=y.find(n=>n.id===s.pizza_id);t&&(C(s),v(t),j(!0))},className:"text-blue-400 hover:text-blue-300 text-xs bg-gray-700 px-2 py-1 rounded",children:"Editar"})]}),s.extras&&s.extras.length>0&&e.jsx("div",{className:"text-xs text-gray-300 mt-1",children:s.extras.map((t,n)=>e.jsxs("span",{className:"mr-2",children:["➕ ",t.nombre," (+$",Math.round(parseFloat(t.precio.toString())),")"]},n))}),s.ingredientes_removidos&&s.ingredientes_removidos.length>0&&e.jsx("div",{className:"text-xs text-gray-300 mt-1",children:s.ingredientes_removidos.map((t,n)=>e.jsxs("span",{className:"mr-2",children:["➖ Sin ",t," (-$50)"]},n))}),s.notas&&e.jsxs("div",{className:"text-xs text-yellow-400 mt-1",children:["📝 ",s.notas]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-green-400 font-bold",children:["$",s.precio_total]})})]})},s.id))})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-green-400 font-medium mb-2",children:["Pizzas Seleccionadas (",i.length,")"]}),i.map(s=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-white",children:s.nombre}),e.jsxs("span",{className:"text-green-400",children:["$",Math.round(parseFloat(s.precio_base.toString()))]})]},s.id))]}),l.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-orange-400 font-medium mb-2",children:["Extras (",l.length,")"]}),l.map(s=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-white",children:s.nombre}),e.jsxs("span",{className:"text-green-400",children:["+$",Math.round(parseFloat(s.precio.toString()))]})]},s.id))]})]}),e.jsx("div",{className:"border-t border-gray-600 pt-3",children:e.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[e.jsx("span",{className:"text-white",children:"Total:"}),e.jsxs("span",{className:"text-green-400",children:["$",h.length>0?h.reduce((s,t)=>s+t.precio_total,0):Math.round(i.reduce((s,t)=>s+parseFloat(t.precio_base.toString()),0)+l.reduce((s,t)=>s+parseFloat(t.precio.toString()),0))]})]})})]})]})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("button",{onClick:D,disabled:r===1,className:"px-6 py-3 bg-gray-600 hover:bg-gray-500 disabled:bg-gray-800 disabled:cursor-not-allowed text-white rounded-lg transition-colors",children:"← Anterior (Backspace)"}),e.jsxs("div",{className:"text-center text-gray-400",children:["Paso ",r," de ",z.length]}),e.jsxs("button",{onClick:L,disabled:!x,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg transition-colors font-medium",children:[r===3?"Finalizar Pedido":"Siguiente →"," (Enter)"]})]}),e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-500",children:[r===1&&!x&&"Selecciona al menos una pizza para continuar",r===3&&!x&&"Selecciona o crea un cliente para finalizar"]}),B&&_&&e.jsx(oe,{pizza:_,editingItem:E,onConfirm:G,onCancel:()=>{j(!1),v(null),C(null)}}),R&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Crear Nuevo Cliente"}),e.jsxs("form",{onSubmit:s=>{s.preventDefault();const t=new FormData(s.currentTarget);Q({nombre:t.get("nombre"),telefono:t.get("telefono"),direccion:t.get("direccion")})},children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nombre *"}),e.jsx("input",{name:"nombre",type:"text",required:!0,defaultValue:I?"":c,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Teléfono *"}),e.jsx("input",{name:"telefono",type:"tel",required:!0,defaultValue:I?c:"",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Dirección"}),e.jsx("input",{name:"direccion",type:"text",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>S(!1),className:"px-4 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded transition-colors",children:"Crear Cliente"})]})]})]})})]})}export{ue as default};
//# sourceMappingURL=Model5Wizard-Y7ac8njI.js.map
